(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),s=a.n(c),i=(a(81),a(82),a(69)),o=a(10),u=a(15),l=a.n(u),j=a(21),d=a(9),b=a(22),p=a.n(b),m=a(3),O=Object(n.createContext)(),h=function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(d.a)(s,2),o=i[0],u=i[1],b=Object(n.useState)(!0),h=Object(d.a)(b,2),x=h[0],g=h[1],f=function(){var e=Object(j.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=localStorage.getItem("biscuit"),t=JSON.parse(t)){e.next=5;break}throw new Error("Please Login");case 5:return a={headers:{Authorization:"Bearer "+t.token}},e.next=8,p.a.get("/currState",a);case 8:n=e.sent,c(n.data),u(!0),(r=t.expires-Math.floor(Date.now()/1e3))&&setTimeout((function(){f()}),1e3*r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),u(!1);case 17:g(!1);case 18:case"end":return e.stop()}var r}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){f()}),[o]),Object(m.jsx)(O.Provider,{value:{user:r,logState:o,loading:x,setLogState:u},children:e.children})},x=a(141),g=a(145),f=a(146),v=a(147),S=a(148),w=a(149),y=a(150),k=a(151),C=a(152),N=a(153),I=a(154),D=a(157),z=a(156),L=function(){var e=Object(x.a)((function(){return{title:{flexGrow:1},main:{margin:"20px 0"},nav:{backgroundColor:"#112d4e"},modal:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}}}))(),t=Object(n.useState)(),a=Object(d.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!0),i=Object(d.a)(s,2),o=i[0],u=i[1],b=Object(n.useState)(""),h=Object(d.a)(b,2),L=h[0],B=h[1],E=Object(n.useContext)(O),J=E.user,U=E.setLogState,F=Object(n.useState)(!1),A=Object(d.a)(F,2),P=A[0],T=A[1],W=Object(n.useState)({}),M=Object(d.a)(W,2),G=M[0],K=M[1],R=Object(n.useState)(""),q=Object(d.a)(R,2),H=q[0],Q=q[1],V=Object(n.useState)(""),X=Object(d.a)(V,2),Y=X[0],Z=X[1],$=Object(n.useState)(""),_=Object(d.a)($,2),ee=_[0],te=_[1],ae=Object(n.useState)(""),ne=Object(d.a)(ae,2),re=ne[0],ce=ne[1],se=Object(n.useState)(""),ie=Object(d.a)(se,2),oe=ie[0],ue=ie[1],le=Object(n.useState)(!1),je=Object(d.a)(le,2),de=je[0],be=je[1],pe=function(){var e=Object(j.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("biscuit"),t=JSON.parse(t),a={headers:{Authorization:"Bearer "+t.token}},e.prev=3,e.next=6,p.a.get("/data",a);case 6:n=e.sent,c(n.data.table),K(n.data.userData),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),B(e.t0.response.data);case 14:u(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),me=function(e){"username"===e.target.name?Q(e.target.value):"address"===e.target.name?Z(e.target.value):te(e.target.value)},Oe=function(){var e=Object(j.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==Y||""!==ee||""!==H){e.next=3;break}return ue("No changes made"),e.abrupt("return");case 3:return be(!0),ue(""),ce(""),t=localStorage.getItem("biscuit"),t=JSON.parse(t),a={headers:{Authorization:"Bearer "+t.token}},e.prev=9,e.next=12,p.a.post("/changeDetails",{userAddress:Y,userPassword:ee,userUsername:H},a);case 12:ce("Update Successful"),pe(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),ue(e.t0.response.data);case 19:be(!1);case 20:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(){return e.apply(this,arguments)}}(),he=Object(m.jsxs)("div",{style:{borderRadius:"20px",position:"relative",width:"40vw",height:"40vh",padding:"40px 20px",backgroundColor:"white",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(m.jsx)("h1",{children:"Edit your details"}),oe&&Object(m.jsx)(z.a,{severity:"error",children:oe}),re&&Object(m.jsx)(z.a,{children:re}),Object(m.jsx)("input",{name:"username",style:{fontSize:"1.3em",width:"80%",margin:"10px",padding:"20px 30px"},type:"text",onChange:me,placeholder:G.username,value:H}),Object(m.jsx)("input",{name:"address",style:{fontSize:"1.3em",width:"80%",margin:"10px",padding:"22px 30px"},type:"text",onChange:me,placeholder:G.address,value:Y}),Object(m.jsx)("input",{name:"password",style:{fontSize:"1.3em",width:"80%",margin:"10px",padding:"22px 30px"},type:"text",onChange:me,placeholder:"enter your new password",value:ee}),Object(m.jsx)(g.a,{style:{margin:"20px 0"},variant:"contained",color:"primary",onClick:Oe,children:"Change"})]}),xe=function(){var e=Object(j.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("biscuit"),t=JSON.parse(t),a={headers:{Authorization:"Bearer "+t.token}},e.prev=3,e.next=6,p.a.get("/delete",a);case 6:U(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0.response?e.t0.response.data:e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){pe()}),[]),o?"":L?Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:L})}):Object(m.jsxs)("div",{children:[Object(m.jsx)(f.a,{position:"static",className:e.nav,children:Object(m.jsxs)(v.a,{children:[Object(m.jsxs)(S.a,{variant:"h6",className:e.title,children:["Welcome ",J]}),Object(m.jsx)(g.a,{color:"secondary",onClick:function(){T(!0)},children:"Edit"}),Object(m.jsx)(g.a,{color:"secondary",onClick:xe,children:"Delete"}),Object(m.jsx)(g.a,{color:"secondary",onClick:function(){localStorage.removeItem("biscuit"),U(!1)},children:"LogOut"})]})}),Object(m.jsx)(w.a,{container:!0,justify:"center",direction:"row",alignItems:"center",className:e.main,children:Object(m.jsxs)(w.a,{item:!0,lg:10,children:[Object(m.jsxs)(y.a,{children:[Object(m.jsx)(k.a,{children:Object(m.jsxs)(C.a,{children:[Object(m.jsx)(N.a,{children:"Email"}),Object(m.jsx)(N.a,{children:"Username"}),Object(m.jsx)(N.a,{children:"Address"})]})}),Object(m.jsx)(I.a,{children:r&&r.map((function(e){return Object(m.jsxs)(C.a,{children:[Object(m.jsx)(N.a,{children:e.email}),Object(m.jsx)(N.a,{children:e.username}),Object(m.jsx)(N.a,{children:e.address})]},e.email)}))})]}),G&&Object(m.jsx)(D.a,{className:e.modal,disableBackdropClick:de,disableEscapeKeyDown:de,open:P,onClose:function(){T(!1)},children:he})]})})]})},B=a(155),E=(a(106),function(){var e=Object(n.useContext)(O).setLogState,t=Object(x.a)((function(){return{mainBox:{height:"100vh",backgroundColor:"#a7bbc7"},button:{margin:"20px 0",width:"30%",fontSize:"1em",padding:"5px 20px"},title:{fontWeight:"400",margin:"0 0 10px"},input:{width:"80%",fontSize:"2em",margin:"5px 0 0"}}})),a=Object(n.useState)(""),r=Object(d.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(""),u=Object(d.a)(i,2),b=u[0],h=u[1],f=Object(n.useState)(""),v=Object(d.a)(f,2),y=v[0],k=v[1],C=t(),N=Object(o.g)(),I=function(e){"email"===e.target.name?s(e.target.value):"pwd"===e.target.name&&h(e.target.value)},D=function(){var t=Object(j.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),t.prev=1,""!==c&&""!==b){t.next=5;break}return k("Fields are empty"),t.abrupt("return");case 5:return t.next=7,p.a.post("/login",{email:c,pwd:b});case 7:n=t.sent,localStorage.setItem("biscuit",JSON.stringify(n.data)),e(!0),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),k(t.t0.response?t.t0.response.data:t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsx)(w.a,{container:!0,justify:"center",direction:"row",alignItems:"center",className:C.mainBox,children:Object(m.jsx)(w.a,{item:!0,lg:4,sm:8,md:6,xs:12,children:Object(m.jsxs)("form",{className:"box",onSubmit:D,children:[Object(m.jsx)(S.a,{className:C.title,variant:"h2",children:"Login"}),y&&Object(m.jsx)(z.a,{severity:"error",children:y}),Object(m.jsx)(B.a,{name:"email",className:C.input,type:"email",placeholder:"email",onChange:I,value:c}),Object(m.jsx)(B.a,{name:"pwd",className:C.input,type:"password",placeholder:"password",onChange:I,value:b}),Object(m.jsxs)("div",{className:"buttonDiv",children:[Object(m.jsx)(g.a,{className:C.button,color:"primary",variant:"contained",type:"submit",onSubmit:D,children:"Log In"}),Object(m.jsx)(g.a,{className:C.button,color:"secondary",variant:"contained",type:"button",onClick:function(){N.push("/signup")},children:"Sign Up"})]})]})})})}),J=function(){var e=Object(n.useContext)(O).setLogState,t=Object(x.a)((function(){return{main:{height:"100vh",backgroundColor:"#a7bbc7"},grid:{border:"20px"},button:{margin:"20px 0",width:"30%",fontSize:"1em",padding:"5px 20px"},title:{fontWeight:"400",margin:"0 0 10px"},input:{width:"80%",fontSize:"2em",margin:"5px 0"}}})),a=Object(n.useState)(""),r=Object(d.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(""),u=Object(d.a)(i,2),b=u[0],h=u[1],f=Object(n.useState)(""),v=Object(d.a)(f,2),y=v[0],k=v[1],C=Object(n.useState)(""),N=Object(d.a)(C,2),I=N[0],D=N[1],L=Object(n.useState)(""),E=Object(d.a)(L,2),J=E[0],U=E[1],F=Object(n.useState)(""),A=Object(d.a)(F,2),P=A[0],T=A[1],W=t(),M=Object(o.g)(),G=function(e){"email"===e.target.name?s(e.target.value):"pwd"===e.target.name?h(e.target.value):"Cpwd"===e.target.name?k(e.target.value):"username"===e.target.name?U(e.target.value):"address"===e.target.name&&D(e.target.value)},K=function(){var t=Object(j.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),t.prev=1,""!==c&&""!==b&&""!==y&&""!==I&&""!==J){t.next=5;break}return T("Form is incomplete","Form is in incomplete"),t.abrupt("return");case 5:if(b===y){t.next=8;break}return T("Passwords didn't match"),t.abrupt("return");case 8:return t.next=10,p.a.post("/signUp",{email:c,pwd:b,address:I,username:J});case 10:n=t.sent,localStorage.setItem("biscuit",JSON.stringify(n.data)),e(!0),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),T(t.t0.response.data);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsx)(w.a,{container:!0,justify:"center",direction:"row",alignItems:"center",className:W.main,children:Object(m.jsx)(w.a,{className:W.grid,item:!0,lg:4,sm:8,md:6,xs:12,children:Object(m.jsxs)("form",{className:"Signupbox",onSubmit:K,children:[Object(m.jsx)(S.a,{className:W.title,variant:"h2",children:"SignUp"}),P&&Object(m.jsx)(z.a,{severity:"error",children:P}),Object(m.jsx)(B.a,{name:"email",className:W.input,type:"email",placeholder:"email",onChange:G,value:c}),Object(m.jsx)(B.a,{name:"username",className:W.input,type:"username",placeholder:"username",onChange:G,value:J}),Object(m.jsx)(B.a,{name:"address",className:W.input,type:"address",placeholder:"address",onChange:G,value:I}),Object(m.jsx)(B.a,{name:"pwd",className:W.input,type:"password",placeholder:"password",onChange:G,value:b}),Object(m.jsx)(B.a,{name:"Cpwd",className:W.input,type:"password",placeholder:"confirm password",onChange:G,value:y}),Object(m.jsxs)("div",{className:"buttonDiv",children:[Object(m.jsx)(g.a,{className:W.button,color:"secondary",variant:"contained",type:"button",onClick:function(){M.push("/")},children:"Log In"}),Object(m.jsx)(g.a,{className:W.button,color:"primary",variant:"contained",type:"submit",onSubmit:K,children:"SignUp"})]})]})})})};var U=function(){var e=Object(n.useContext)(O),t=e.logState,a=e.loading;return Object(m.jsx)("div",{className:"app",children:Object(m.jsx)(i.a,{children:Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.b,{path:"/signUp",render:function(){return a?"":t?Object(m.jsx)(o.a,{to:"/"}):Object(m.jsx)(J,{})}}),Object(m.jsx)(o.b,{path:"/",render:function(){return a?"":t?Object(m.jsx)(L,{}):Object(m.jsx)(E,{})}})]})})})},F=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,159)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(h,{children:Object(m.jsx)(U,{})})}),document.getElementById("root")),F()},81:function(e,t,a){},82:function(e,t,a){}},[[110,1,2]]]);
//# sourceMappingURL=main.434a6121.chunk.js.map