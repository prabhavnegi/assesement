(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),s=a.n(c),i=(a(81),a(82),a(69)),o=a(10),l=a(14),u=a.n(l),j=a(19),d=a(8),b=a(20),p=a.n(b),m=a(2),h=Object(n.createContext)(),O=function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(d.a)(s,2),o=i[0],l=i[1],b=Object(n.useState)(!0),O=Object(d.a)(b,2),x=O[0],g=O[1],f=function(){var e=Object(j.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=localStorage.getItem("biscuit"),t=JSON.parse(t)){e.next=5;break}throw new Error("Please Login");case 5:return a={headers:{Authorization:"Bearer "+t.token}},e.next=8,p.a.get("/currState",a);case 8:n=e.sent,c(n.data),l(!0),(r=t.expires-Math.floor(Date.now()/1e3))&&setTimeout((function(){f()}),1e3*r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),l(!1);case 17:g(!1);case 18:case"end":return e.stop()}var r}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){f()}),[o]),Object(m.jsx)(h.Provider,{value:{user:r,logState:o,loading:x,setLogState:l},children:e.children})},x=a(141),g=a(145),f=a(146),v=a(147),S=a(148),y=a(149),w=a(150),k=a(151),C=a(152),N=a(153),D=a(154),I=a(157),L=a(156),U=function(){var e=Object(x.a)((function(){return{title:{flexGrow:1},main:{margin:"20px 0"},nav:{backgroundColor:"#112d4e"},modal:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}}}))(),t=Object(n.useState)(),a=Object(d.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!0),i=Object(d.a)(s,2),o=i[0],l=i[1],b=Object(n.useState)(""),O=Object(d.a)(b,2),U=O[0],B=O[1],z=Object(n.useContext)(h),E=z.user,J=z.setLogState,F=Object(n.useState)(!1),A=Object(d.a)(F,2),P=A[0],R=A[1],K=Object(n.useState)({}),T=Object(d.a)(K,2),W=T[0],M=T[1],G=Object(n.useState)(""),Y=Object(d.a)(G,2),q=Y[0],H=Y[1],Q=Object(n.useState)(""),V=Object(d.a)(Q,2),X=V[0],Z=V[1],$=Object(n.useState)(""),_=Object(d.a)($,2),ee=_[0],te=_[1],ae=Object(n.useState)(""),ne=Object(d.a)(ae,2),re=ne[0],ce=ne[1],se=Object(n.useState)(""),ie=Object(d.a)(se,2),oe=ie[0],le=ie[1],ue=Object(n.useState)(!1),je=Object(d.a)(ue,2),de=je[0],be=je[1],pe=Object(n.useState)(null),me=Object(d.a)(pe,2),he=me[0],Oe=me[1],xe=Object(n.useState)(""),ge=Object(d.a)(xe,2),fe=ge[0],ve=ge[1],Se=Object(n.useState)(!1),ye=Object(d.a)(Se,2),we=ye[0],ke=ye[1],Ce=Object(n.useState)(""),Ne=Object(d.a)(Ce,2),De=Ne[0],Ie=Ne[1],Le=Object(n.useState)([]),Ue=Object(d.a)(Le,2),Be=Ue[0],ze=Ue[1],Ee=Object(n.useRef)(),Je=function(){var e=Object(j.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("biscuit"),t=JSON.parse(t),a={headers:{Authorization:"Bearer "+t.token}},e.prev=3,e.next=6,p.a.get("/data",a);case 6:n=e.sent,console.log(n.data),c([n.data.userData]),M(n.data.userData),ze(n.data.files),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),B(e.t0.response.data);case 16:l(!1);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(){return e.apply(this,arguments)}}(),Fe=function(){R(!1),ke(!1)},Ae=function(){Oe(null),Ie(""),ve(""),ke(!1)},Pe=function(e){"username"===e.target.name?H(e.target.value):"address"===e.target.name?Z(e.target.value):te(e.target.value)},Re=function(){var e=Object(j.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==X||""!==ee||""!==q){e.next=3;break}return le("No changes made"),e.abrupt("return");case 3:return be(!0),le(""),ce(""),t=localStorage.getItem("biscuit"),t=JSON.parse(t),a={headers:{Authorization:"Bearer "+t.token}},e.prev=9,e.next=12,p.a.post("/changeDetails",{userAddress:X,userPassword:ee,userUsername:q},a);case 12:ce("Update Successful"),Je(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),le(e.t0.response.data);case 19:be(!1);case 20:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(j.a)(u.a.mark((function e(){var t,a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("biscuit"),t=JSON.parse(t),a={headers:{Authorization:"Bearer "+t.token,"Content-Type":"multipart/form-data"}},(n=new FormData).append("file",he),n.append("filename",fe),be(!0),le(""),ce(""),e.prev=9,e.next=12,p.a.post("/upload",n,a);case 12:r=e.sent,ce("Upload Successful"),Je(),console.log(r),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(9),le(e.t0.response.data);case 21:be(!1);case 22:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(){return e.apply(this,arguments)}}(),Te=Object(m.jsxs)("div",{style:{borderRadius:"20px",position:"relative",width:"40vw",height:"40vh",padding:"40px 20px",backgroundColor:"white",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(m.jsx)("h1",{children:"Edit your details"}),oe&&Object(m.jsx)(L.a,{severity:"error",children:oe}),re&&Object(m.jsx)(L.a,{children:re}),Object(m.jsx)("input",{name:"username",style:{fontSize:"1.3em",width:"80%",margin:"10px",padding:"20px 30px"},type:"text",onChange:Pe,placeholder:W.username,value:q}),Object(m.jsx)("input",{name:"address",style:{fontSize:"1.3em",width:"80%",margin:"10px",padding:"22px 30px"},type:"text",onChange:Pe,placeholder:W.address,value:X}),Object(m.jsx)("input",{name:"password",style:{fontSize:"1.3em",width:"80%",margin:"10px",padding:"22px 30px"},type:"text",onChange:Pe,placeholder:"enter your new password",value:ee}),Object(m.jsx)(g.a,{style:{margin:"20px 0"},variant:"contained",color:"primary",onClick:Re,children:"Change"})]}),We=Object(m.jsxs)("div",{style:{borderRadius:"20px",position:"relative",width:"40vw",height:"40vh",padding:"40px 20px",backgroundColor:"white",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(m.jsx)("h1",{children:"Upload your file"}),Object(m.jsx)("img",{style:{width:"40%",margin:"10px"},src:De,alt:""}),oe&&Object(m.jsx)(L.a,{severity:"error",children:oe}),re&&Object(m.jsx)(L.a,{children:re}),Object(m.jsx)(g.a,{style:{margin:"20px 0"},variant:"contained",color:"primary",onClick:Ke,children:de?"Uploading":"Upload"})]}),Me=function(){var e=Object(j.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("biscuit"),t=JSON.parse(t),a={headers:{Authorization:"Bearer "+t.token}},e.prev=3,e.next=6,p.a.get("/delete",a);case 6:J(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0.response?e.t0.response.data:e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(j.a)(u.a.mark((function e(t,a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("biscuit"),n=JSON.parse(n),r={headers:{Authorization:"Bearer "+n.token}},e.prev=3,e.next=6,p.a.post("/deletefile",{filename:t,url:a},r);case 6:Je(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0.response?e.t0.response.data:e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){Je()}),[]),Object(n.useEffect)((function(){null!=he&&ke(!0)}),[he,fe]),o?"":U?Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:U})}):Object(m.jsxs)("div",{children:[Object(m.jsx)(f.a,{position:"static",className:e.nav,children:Object(m.jsxs)(v.a,{children:[Object(m.jsxs)(S.a,{variant:"h6",className:e.title,children:["Welcome ",E]}),Object(m.jsx)("input",{type:"file",name:"file",ref:Ee,onChange:function(e){Oe(e.target.files[0]),ve(e.target.files[0].name),Ie(URL.createObjectURL(e.target.files[0]))},style:{display:"none"}}),Object(m.jsx)(g.a,{color:"secondary",onClick:function(){Ee.current.click()},children:"Upload"}),Object(m.jsx)(g.a,{color:"secondary",onClick:function(){R(!0)},children:"Edit"}),Object(m.jsx)(g.a,{color:"secondary",onClick:Me,children:"Delete"}),Object(m.jsx)(g.a,{color:"secondary",onClick:function(){localStorage.removeItem("biscuit"),J(!1)},children:"LogOut"})]})}),Object(m.jsxs)(y.a,{container:!0,justify:"center",direction:"row",alignItems:"center",className:e.main,children:[Object(m.jsxs)(y.a,{item:!0,sm:10,children:[Object(m.jsxs)(w.a,{children:[Object(m.jsx)(k.a,{children:Object(m.jsxs)(C.a,{children:[Object(m.jsx)(N.a,{children:"Email"}),Object(m.jsx)(N.a,{children:"Username"}),Object(m.jsx)(N.a,{children:"Address"})]})}),Object(m.jsx)(D.a,{children:r&&r.map((function(e){return Object(m.jsxs)(C.a,{children:[Object(m.jsx)(N.a,{children:e.email}),Object(m.jsx)(N.a,{children:e.username}),Object(m.jsx)(N.a,{children:e.address})]},e.email)}))})]}),W&&Object(m.jsx)(I.a,{className:e.modal,disableBackdropClick:de,disableEscapeKeyDown:de,open:P,onClose:Fe,children:Te}),he&&Object(m.jsx)(I.a,{className:e.modal,disableBackdropClick:de,disableEscapeKeyDown:de,open:we,onClose:Ae,children:We})]}),Object(m.jsx)(y.a,{item:!0,sm:10,children:Object(m.jsx)(S.a,{style:{margin:"60px 0 20px",paddingLeft:"12px"},variant:"h6",className:e.title,children:"Your files :"})}),Object(m.jsxs)(y.a,{item:!0,sm:10,children:[Object(m.jsxs)(w.a,{children:[Object(m.jsx)(k.a,{children:Object(m.jsxs)(C.a,{children:[Object(m.jsx)(N.a,{children:"File Name"}),Object(m.jsx)(N.a,{children:"Link"}),Object(m.jsx)(N.a,{children:"Delete"})]})}),Object(m.jsx)(D.a,{children:Be&&Be.map((function(e){return Object(m.jsxs)(C.a,{children:[Object(m.jsx)(N.a,{children:e.name}),Object(m.jsx)(N.a,{children:Object(m.jsx)("a",{href:e.url,children:"Link"})}),Object(m.jsx)(N.a,{children:Object(m.jsx)("button",{type:"button",onClick:function(){Ge(e.name,e.url)},children:"Delete"})})]},e.name)}))})]}),W&&Object(m.jsx)(I.a,{className:e.modal,disableBackdropClick:de,disableEscapeKeyDown:de,open:P,onClose:Fe,children:Te}),he&&Object(m.jsx)(I.a,{className:e.modal,disableBackdropClick:de,disableEscapeKeyDown:de,open:we,onClose:Ae,children:We})]})]})]})},B=a(155),z=(a(106),function(){var e=Object(n.useContext)(h).setLogState,t=Object(x.a)((function(){return{mainBox:{height:"100vh",backgroundColor:"#a7bbc7"},button:{margin:"20px 0",width:"30%",fontSize:"1em",padding:"5px 20px"},title:{fontWeight:"400",margin:"0 0 10px"},input:{width:"80%",fontSize:"2em",margin:"5px 0 0"}}})),a=Object(n.useState)(""),r=Object(d.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(""),l=Object(d.a)(i,2),b=l[0],O=l[1],f=Object(n.useState)(""),v=Object(d.a)(f,2),w=v[0],k=v[1],C=t(),N=Object(o.g)(),D=function(e){"email"===e.target.name?s(e.target.value):"pwd"===e.target.name&&O(e.target.value)},I=function(){var t=Object(j.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),t.prev=1,""!==c&&""!==b){t.next=5;break}return k("Fields are empty"),t.abrupt("return");case 5:return t.next=7,p.a.post("/login",{email:c,pwd:b});case 7:n=t.sent,localStorage.setItem("biscuit",JSON.stringify(n.data)),e(!0),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),k(t.t0.response?t.t0.response.data:t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsx)(y.a,{container:!0,justify:"center",direction:"row",alignItems:"center",className:C.mainBox,children:Object(m.jsx)(y.a,{item:!0,lg:4,sm:8,md:6,xs:12,children:Object(m.jsxs)("form",{className:"box",onSubmit:I,children:[Object(m.jsx)(S.a,{className:C.title,variant:"h2",children:"Login"}),w&&Object(m.jsx)(L.a,{severity:"error",children:w}),Object(m.jsx)(B.a,{name:"email",className:C.input,type:"email",placeholder:"email",onChange:D,value:c}),Object(m.jsx)(B.a,{name:"pwd",className:C.input,type:"password",placeholder:"password",onChange:D,value:b}),Object(m.jsxs)("div",{className:"buttonDiv",children:[Object(m.jsx)(g.a,{className:C.button,color:"primary",variant:"contained",type:"submit",onSubmit:I,children:"Log In"}),Object(m.jsx)(g.a,{className:C.button,color:"secondary",variant:"contained",type:"button",onClick:function(){N.push("/signup")},children:"Sign Up"})]})]})})})}),E=function(){var e=Object(n.useContext)(h).setLogState,t=Object(x.a)((function(){return{main:{height:"100vh",backgroundColor:"#a7bbc7"},grid:{border:"20px"},button:{margin:"20px 0",width:"30%",fontSize:"1em",padding:"5px 20px"},title:{fontWeight:"400",margin:"0 0 10px"},input:{width:"80%",fontSize:"2em",margin:"5px 0"}}})),a=Object(n.useState)(""),r=Object(d.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(""),l=Object(d.a)(i,2),b=l[0],O=l[1],f=Object(n.useState)(""),v=Object(d.a)(f,2),w=v[0],k=v[1],C=Object(n.useState)(""),N=Object(d.a)(C,2),D=N[0],I=N[1],U=Object(n.useState)(""),z=Object(d.a)(U,2),E=z[0],J=z[1],F=Object(n.useState)(""),A=Object(d.a)(F,2),P=A[0],R=A[1],K=t(),T=Object(o.g)(),W=function(e){"email"===e.target.name?s(e.target.value):"pwd"===e.target.name?O(e.target.value):"Cpwd"===e.target.name?k(e.target.value):"username"===e.target.name?J(e.target.value):"address"===e.target.name&&I(e.target.value)},M=function(){var t=Object(j.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),t.prev=1,""!==c&&""!==b&&""!==w&&""!==D&&""!==E){t.next=5;break}return R("Form is incomplete","Form is in incomplete"),t.abrupt("return");case 5:if(b===w){t.next=8;break}return R("Passwords didn't match"),t.abrupt("return");case 8:return t.next=10,p.a.post("/signUp",{email:c,pwd:b,address:D,username:E});case 10:n=t.sent,localStorage.setItem("biscuit",JSON.stringify(n.data)),e(!0),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),R(t.t0.response.data);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsx)(y.a,{container:!0,justify:"center",direction:"row",alignItems:"center",className:K.main,children:Object(m.jsx)(y.a,{className:K.grid,item:!0,lg:4,sm:8,md:6,xs:12,children:Object(m.jsxs)("form",{className:"Signupbox",onSubmit:M,children:[Object(m.jsx)(S.a,{className:K.title,variant:"h2",children:"SignUp"}),P&&Object(m.jsx)(L.a,{severity:"error",children:P}),Object(m.jsx)(B.a,{name:"email",className:K.input,type:"email",placeholder:"email",onChange:W,value:c}),Object(m.jsx)(B.a,{name:"username",className:K.input,type:"username",placeholder:"username",onChange:W,value:E}),Object(m.jsx)(B.a,{name:"address",className:K.input,type:"address",placeholder:"address",onChange:W,value:D}),Object(m.jsx)(B.a,{name:"pwd",className:K.input,type:"password",placeholder:"password",onChange:W,value:b}),Object(m.jsx)(B.a,{name:"Cpwd",className:K.input,type:"password",placeholder:"confirm password",onChange:W,value:w}),Object(m.jsxs)("div",{className:"buttonDiv",children:[Object(m.jsx)(g.a,{className:K.button,color:"secondary",variant:"contained",type:"button",onClick:function(){T.push("/")},children:"Log In"}),Object(m.jsx)(g.a,{className:K.button,color:"primary",variant:"contained",type:"submit",onSubmit:M,children:"SignUp"})]})]})})})};var J=function(){var e=Object(n.useContext)(h),t=e.logState,a=e.loading;return Object(m.jsx)("div",{className:"app",children:Object(m.jsx)(i.a,{children:Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.b,{path:"/signUp",render:function(){return a?"":t?Object(m.jsx)(o.a,{to:"/"}):Object(m.jsx)(E,{})}}),Object(m.jsx)(o.b,{path:"/",render:function(){return a?"":t?Object(m.jsx)(U,{}):Object(m.jsx)(z,{})}})]})})})},F=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,159)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(O,{children:Object(m.jsx)(J,{})})}),document.getElementById("root")),F()},81:function(e,t,a){},82:function(e,t,a){}},[[110,1,2]]]);
//# sourceMappingURL=main.d42cac6b.chunk.js.map